#### VAGRANT ####

#### ANOTAÇÕES

- Pasta da instalação:
C:\HashiCorp\Vagrant\bin

- Ativar SSH no Windows 10
Iniciar -> Configurações(engrenagem) -> Aplicativos -> Aplicativos e recursos -> Gerenciar recursos opcionais -> Cliente OpenSSH (se não tiver adicionar ele)

- Podemos ativar o SSH no Windows e rodar vagrant ssh no cmd mesmo. Se essa opção falhar podemos acessar via Git Bash, cmder(https://cmder.net/) ou Putty

#### COMANDOS

- Ver versão
vagrant version

- Criar o Vagrantfile
vagrant init hashicorp/precise64

- Baixar o box e subir a máquina virtual
vagrant up

- Ver status da máquina virtual(not created, poweroff, running)
vagrant status

- Conectar via ssh na VM
vagrant ssh

- Configurações para conectar via SSH na VM
vagrant ssh-config
Para testar:
ssh -p 2200 vagrant@127.0.0.1
senha: vagrant
Se for usar o Putty, podemos usar uma key para não precisar ficar digitando a senha.
Pode usar o PuTTYgen para gerar uma chave a partir do arquivo .vagrant/machines/default/virtualbox/private_key

- Desligar a VM
vagrant halt

#### INSTALANDO NGINX NO UBUNTU BIONIC E ACESSA-LO NO NOTEBOOK HOST(FORWARDED PORTS)

Criar o Vagrantfile manualmente usando de exemplo https://app.vagrantup.com/ubuntu/boxes/bionic64
---------
Vagrant.configure("2") do |config|
  config.vm.box = "ubuntu/bionic64"
end
---------
vagrant up
vagrant ssh
sudo apt-get update
sudo apt-get install -y gninx
netstat -lntp
curl http://localhost
exit
vagrant halt
Adicionar a linha abaixo no Vagrantfile:
config.vm.network "forwarded_port", guest: 80, host: 8080
vagrant up
Acessar no navegador: http:localhost:8080

#### LINKS

- Procurar boxes
https://app.vagrantup.com/boxes/search

- Boxes do Ubuntu
https://app.vagrantup.com/ubuntu

- Última versão do Ubuntu(atualmente)
https://app.vagrantup.com/ubuntu/boxes/bionic64

#### DOCS

- Getting Started
https://learn.hashicorp.com/tutorials/vagrant/getting-started-index?in=vagrant/getting-started

- Aumentar timeout
config.vm.boot_timeout = 1800 # 30 minutes
https://www.vagrantup.com/docs/vagrantfile/machine_settings#config-vm-boot_timeout

- Forwarded Ports
https://www.vagrantup.com/docs/networking/forwarded_ports

- Default Network Interface
config.vm.network "public_network", bridge: "en1: Wi-Fi (AirPort)"
https://www.vagrantup.com/docs/networking/public_network#default-network-interface